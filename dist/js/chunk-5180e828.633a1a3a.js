(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5180e828"],{"059c":function(t,e,i){"use strict";var n=i("c3d3"),s=i.n(n);s.a},1029:function(t,e,i){},"28a8":function(t,e,i){},2921:function(t,e,i){"use strict";var n=i("4ecd"),s=i.n(n);s.a},"495d":function(t,e,i){"use strict";var n=i("af4c"),s=i.n(n);s.a},"4b8c":function(t,e,i){"use strict";var n=i("28a8"),s=i.n(n);s.a},"4ecd":function(t,e,i){},"7be7":function(t,e,i){"use strict";var n=i("1029"),s=i.n(n);s.a},af4c:function(t,e,i){},be61:function(t,e,i){},c3d3:function(t,e,i){},d8eb:function(t,e,i){"use strict";var n=i("be61"),s=i.n(n);s.a},fb13:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{on:{click:t.colseComment}},[i("PostMain",{scopedSlots:t._u([{key:"top",fn:function(){return[i("PostBanner",{attrs:{banner:t.banner,title:t.title,head_img:t.head_img,author:t.author,created_time:t.created_time}})]},proxy:!0},{key:"center",fn:function(){return[i("PostCenter",{attrs:{content:t.content,head_img:t.head_img,author:t.author,like_number:t.like_number,comment:t.comment},on:{userClickZan:t.reqNewData,chongdian:t.reqNewData}})]},proxy:!0}])}),i("Comment",{attrs:{isShowRe:t.isShowRe},on:{showRe:t.showRe,reqNewData:t.reqNewData,commentCount:t.commentCount}}),i("recommend"),i("Postbottom"),i("goTop",{staticClass:"go-top-component"}),i("Nav")],1)},s=[],a=(i("4160"),i("caad"),i("fb6a"),i("d3b7"),i("25f0"),i("159b"),i("8c47")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"post-main"},[i("div",{staticClass:"post-main-top"},[t._t("top")],2),i("div",{staticClass:"post-main-center"},[t._t("center")],2)])},c=[],r={name:"PostMain"},l=r,m=(i("059c"),i("2877")),u=Object(m["a"])(l,o,c,!1,null,"157e051e",null),d=u.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-column-center post-banner"},[i("div",{staticClass:"bgbox"}),i("div",{staticClass:"post-banner-content"},[i("img",{staticClass:"post-banner-img",attrs:{src:t.banner}}),i("h2",[t._v(t._s(t.title))]),i("div",{staticClass:"post-banner-info flex-between"},[i("div",{staticClass:"info-left"},[i("img",{attrs:{src:t.head_img}}),i("span",{staticClass:"author"},[t._v(t._s(t.author))])]),i("div",{staticClass:"info-right"},[t._v(t._s(t.created_time))])])])])},f=[],_={name:"PostBanner",props:{banner:{type:String,default:""},title:{type:String,default:""},head_img:{type:String,default:""},author:{type:String,default:""},created_time:{type:String,default:""}}},p=_,v=(i("7be7"),Object(m["a"])(p,h,f,!1,null,"0a30df38",null)),C=v.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-column-center post-center"},[i("div",{ref:"postcontent",staticClass:"post-article-content wangEditor-text",domProps:{innerHTML:t._s(t.content)}}),i("div",{ref:"postleft",staticClass:"post-center-left flex-column-center"},[i("i",{staticClass:"iconfont icon-chongdian center",class:{like_active:t.likeArt.includes(Number(t.article_id))},on:{click:t.likeArticle}}),i("span",[t._v(t._s(t.like_number))]),i("i",{staticClass:"iconfont icon-liuyan",on:{click:t.toComment}}),i("span",[t._v(t._s(t.comment))]),i("i",{staticClass:"iconfont icon-share"})]),i("div",{staticStyle:{width:"100%",height:"1px","background-color":"#eee","max-width":"750px"}}),i("div",{staticClass:"content-bottom"},[i("div",{staticClass:"info-left"},[i("img",{attrs:{src:t.head_img}}),i("span",{staticClass:"author"},[t._v(t._s(t.author))]),i("span",{staticClass:"attention-btn"},[t._v("关注")])])])])},b=[],k=(i("a9e3"),i("dc07")),w={name:"PostCenter",props:{content:{type:String,default:""},author:{type:String,default:""},view:{type:Number,default:0},comment:{type:Number,default:0},head_img:{type:String,default:""},like_number:{type:Number,default:0}},data:function(){return{likeArt:[],article_id:""}},created:function(){if(this.article_id=this.$route.params.id,this.isLogin){var t=localStorage.getItem("uid"),e=Object(k["j"])(Number(t));e&&(this.likeArt=e.data)}},mounted:function(){window.addEventListener("scroll",this.fixedLeft,!1)},updated:function(){var t=localStorage.getItem("uid");if(t){var e=Object(k["j"])(Number(t));e&&(this.likeArt=e.data)}},methods:{fixedLeft:function(){var t=document.documentElement.clientHeight/2,e=this.$refs.postcontent,i=this.$refs.postleft,n=e.getBoundingClientRect(),s=n.top,a=n.height,o=n.bottom,c=i.getBoundingClientRect().height;t>=s+c/2?(i.style.position="fixed",i.style.top=t-c/2+"px"):t<s+c/2&&(i.style.position="absolute",i.style.top="0px"),a>2*t&&o<=t+c/2&&(i.style.position="absolute",i.style.top=a-c+"px")},toComment:function(){var t=document.querySelector(".post-main").getBoundingClientRect().height,e=document.documentElement,i=document.body,n=setInterval((function(){var s=e.scrollTop||i.scrollTop,a=Math.floor((t-s)/8);e.scrollTop=i.scrollTop=s+a,0==a&&(e.scrollTop=i.scrollTop=t,clearInterval(n))}),5)},likeArticle:function(){if(this.isLogin){var t=localStorage.getItem("uid")||0,e=this.$route.params.id,i=Object(k["b"])(Number(t),Number(e));i&&this.$emit("chongdian")}else this.$store.state.isShowLogin=!0}},computed:{isLogin:function(){return this.$store.state.isLoginSuc}},watch:{isLogin:function(){var t=localStorage.getItem("uid")||0,e=Object(k["j"])(Number(t));e&&(this.likeArt=e.data)}},destroyed:function(){document.documentElement.scrollTop=0,window.removeEventListener("scroll",this.fixedLeft)}},x=w,y=(i("d8eb"),Object(m["a"])(x,g,b,!1,null,"6459c548",null)),S=y.exports,L=i("8bbb"),j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-column-center"},[i("div",{staticClass:"post-rec"},[i("h3",[t._v("推荐阅读")]),i("ul",{staticClass:"recommend-list"},t._l(t.recommentedList,(function(e,n){return i("li",{key:n,on:{click:function(i){return t.toX(e.id)}}},[i("div",{staticClass:"li-list-img"},[i("img",{attrs:{src:e.list_img_src}})]),i("h3",[t._v(t._s(e.title))]),i("div",{staticClass:"article-author-info"},[i("div",{staticClass:"left"},[i("img",{staticClass:"author-header-img",attrs:{src:e.headerImg}}),i("span",{staticClass:"author-username"},[t._v(t._s(e.author))])]),i("div",{staticClass:"right"},[i("span",{staticClass:"article-view"},[i("i",{staticClass:"iconfont icon-like"}),t._v(" "+t._s(e.view)+" ")])])])])})),0)])])},$=[],I={name:"recommend",data:function(){return{recommentedList:[]}},created:function(){this.reqData()},methods:{reqData:function(){var t=Object(k["e"])("推荐");this.recommentedList=t.slice(3,9)},toX:function(t){var e=this.$router.resolve({path:"/articledetails/".concat(t)}),i=e.href;window.open(i,"_blank")}}},N=I,q=(i("495d"),Object(m["a"])(N,j,$,!1,null,"6098b46d",null)),O=q.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"post-bottom"},[i("div",{staticClass:"post-bottom-main flex-between"},[i("div",{staticClass:"left"},[t._m(0),i("Blogroll"),i("p",{staticClass:"copyright"},[t._v("© 2013-2019 少数派 | 粤ICP备09128966号-4 | CC BY-NC 4.0")])],1),t._m(1)])])},E=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left-logo"},[i("span",{staticClass:"logo-icon"}),i("span",{staticClass:"logo-title"},[t._v("少数派")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"link-box"},[i("a",{attrs:{href:"javascript:0"}},[t._v("关于我们")]),i("a",{attrs:{href:"javascript:0"}},[t._v("联系我们")])]),i("div",{staticClass:"link-box"},[i("a",{attrs:{href:"javascript:0"}},[t._v("成为作者")]),i("a",{attrs:{href:"javascript:0"}},[t._v("常见问题")])]),i("div",{staticClass:"link-box"},[i("a",{attrs:{href:"javascript:0"}},[t._v("用户协议")]),i("a",{attrs:{href:"javascript:0"}},[t._v("客户端")])])])}],T=i("f516"),A={name:"Postbottom",components:{Blogroll:T["a"]}},R=A,Z=(i("2921"),Object(m["a"])(R,P,E,!1,null,"562dadaa",null)),B=Z.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-column-center"},[i("div",{staticClass:"comment-comtainer"},[i("div",{staticClass:"comment-title"},[t._v("全部评论（"+t._s(t.commentCount)+"）")]),i("div",{staticClass:"comment-input"},[i("div",{staticClass:"left"},[i("img",{staticClass:"user-head-img",attrs:{src:t.headImg}})]),i("div",{staticClass:"right"},[t.isShowRe?t._e():i("input",{staticClass:"write-comment",attrs:{type:"text",placeholder:"写下你的评论"},on:{focus:t.writeComment}}),t.isShowRe?i("div",[i("p",{staticClass:"user-name"},[t._v(t._s(t.username))]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"comment-textarea",attrs:{autofocus:"true"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}}),i("div",{staticClass:"write-comment-bottom"},[i("span",{staticClass:"comment-submit",on:{click:function(e){return t.subComment()}}},[t._v("评论")])])]):t._e()])]),t.isNo?i("div",{staticClass:"no-comment"},[t._v("还没有评论哦~")]):t._e(),i("ul",{staticClass:"comment-ul"},t._l(t.commentList,(function(e,n){return i("div",{key:n,staticClass:"comment-item"},[i("li",{staticClass:"comment-li"},[i("div",{staticClass:"left"},[i("img",{staticClass:"user-head-img",attrs:{src:e.head_img}})]),i("div",{staticClass:"right"},[i("p",{staticClass:"user-name"},[t._v(t._s(e.username))]),i("p",{staticClass:"comment-created-time"},[t._v(t._s(e.created_time))]),i("p",{staticClass:"comment-content",domProps:{innerHTML:t._s(e.content)}}),i("div",{staticClass:"comment-icon"},[i("i",{staticClass:"iconfont icon-liuyan",on:{click:function(i){return t.showTexterea(e.created_time)}}}),i("span",{staticClass:"amount"},[t._v(t._s(e.reply_num))]),t.likeList.includes(e.id)?i("i",{staticClass:"iconfont icon-xin",on:{click:function(i){return t.cancleClickZan(e.id)}}}):i("i",{staticClass:"iconfont icon-like",on:{click:function(i){return t.clickZan(e.id)}}}),i("span",{staticClass:"amount"},[t._v(t._s(e.like_number))])]),i("div",{staticClass:"texterea-container",attrs:{"data-index":e.created_time}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"comment-textarea",attrs:{autofocus:"true"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}}),i("div",{staticClass:"write-comment-bottom"},[i("span",{staticClass:"comment-submit",on:{click:function(i){return t.subComment(e.id)}}},[t._v("评论")])])]),i("ul",{staticClass:"user-reply"},t._l(e.re_comment,(function(n,s){return i("li",{key:s,staticClass:"comment-li"},[i("div",{staticClass:"left"},[i("img",{staticClass:"user-head-img",attrs:{src:n.head_img}})]),i("div",{staticClass:"right"},[i("p",{staticClass:"user-name"},[t._v(" "+t._s(n.username)+" "),n.re_username?i("span",{staticClass:"reply-username"},[t._v("回复 "+t._s(n.re_username))]):t._e()]),i("p",{staticClass:"comment-created-time"},[t._v(t._s(n.created_time))]),i("p",{staticClass:"comment-content",domProps:{innerHTML:t._s(n.content)}}),i("div",{staticClass:"comment-icon"},[i("i",{staticClass:"iconfont icon-liuyan",on:{click:function(e){return t.showTexterea(n.created_time)}}}),i("span",{staticClass:"amount"},[t._v(t._s(n.reply_num))]),t.likeList.includes(n.id)?i("i",{staticClass:"iconfont icon-xin",on:{click:function(e){return t.cancleClickZan(n.id)}}}):i("i",{staticClass:"iconfont icon-like",on:{click:function(e){return t.clickZan(n.id)}}}),i("span",{staticClass:"amount"},[t._v(t._s(n.like_number))])]),i("div",{staticClass:"texterea-container",attrs:{"data-index":n.created_time}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"comment-textarea",attrs:{autofocus:"true"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}}),i("div",{staticClass:"write-comment-bottom"},[i("span",{staticClass:"comment-submit",on:{click:function(i){return t.subComment(e.id,n.username,n.id)}}},[t._v("评论")])])])])])})),0)])])])})),0)])])},M=[],F=(i("ac1f"),i("5319"),i("498a"),i("ed08")),H={name:"comment",props:{isShowRe:{type:Boolean,default:!1}},data:function(){return{commentCount:0,headImg:"",username:"",commentList:[],isNo:!0,commentContent:"",likeList:[]}},created:function(){this.showUserName(),this.reqComment(),this.reqIsClickZan()},methods:{showUserName:function(){if(this.isLogin){var t=localStorage.getItem("headImg"),e=localStorage.getItem("username");t&&(this.headImg=t),e&&(this.username=e)}else this.headImg="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1571071012103&di=246bbc25cc64b3ae9e466baf1755e816&imgtype=0&src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F01460b57e4a6fa0000012e7ed75e83.png%401280w_1l_2o_100sh.png"},writeComment:function(){if(this.isLogin){this.$emit("showRe",!0);var t=document.querySelectorAll(".texterea-container");t.forEach((function(t){t.style.display="none"}))}else this.$store.state.isShowLogin=!0},reqComment:function(){var t=this,e=this.$route.params.id,i=Object(k["f"])(e),n=[];i.length&&i.forEach((function(t){if(0===t.re_comment_id){var e={};e.id=t.id,e.article_id=t.article_id,e.user_id=t.user_id,e.username=Object(k["h"])(t.user_id).username,e.head_img=Object(k["h"])(t.user_id).headerImg,e.content=t.comment_content,e.created_time=Object(F["a"])(t.created_time),e.like_number=t.like_number,e.reply_num=t.reply_num,e.re_comment=[],n.unshift(e)}else n.forEach((function(e){if(e.id===t.re_comment_id){var i={};i.id=t.id,i.article_id=t.article_id,i.user_id=t.user_id,i.head_img=Object(k["h"])(t.user_id).headerImg,i.username=Object(k["h"])(t.user_id).username,i.created_time=Object(F["a"])(t.created_time),i.content=t.comment_content,i.reply_num=t.reply_num,i.like_number=t.like_number,"0"==t.re_username?i.re_username="":i.re_username=t.re_username,e.re_comment.push(i)}}))})),this.commentList=n,this.commentCount=n.length,n.length>0&&n.forEach((function(e){t.commentCount=t.commentCount+e.re_comment.length})),this.$emit("commentCount",this.commentCount),i.length&&(this.isNo=!1)},subComment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.commentContent.trim()){var n=this.$route.params.id,s=t,a=localStorage.getItem("uid"),o=e,c=this.commentContent.replace(/\n|\r\n/g,"<br/>"),r=Object(k["k"])({article_id:n,user_id:a,re_comment_id:s,re_username:o,content:c,subCommentId:i});"成功"===r.msg&&(this.reqComment(),this.commentContent="",this.$emit("showRe",!1),this.hideTextereaAll())}else this.$store.state.toastMsg="不能提交空内容！",this.$store.state.isShowPopup=!0},showTexterea:function(t){if(this.isLogin){this.$emit("showRe",!1),this.hideTextereaAll();var e=document.querySelector(".texterea-container[data-index='".concat(t,"']"));e.style.display="block"}else this.$store.state.isShowLogin=!0},hideTextereaAll:function(){var t=document.querySelectorAll(".texterea-container");t.forEach((function(t){t.style.display="none"}))},clickZan:function(t){if(this.isLogin){var e=localStorage.getItem("uid"),i=Object(k["c"])(e,t);"成功"===i.msg&&(this.reqComment(),this.reqIsClickZan())}else this.$store.state.isShowLogin=!0},reqIsClickZan:function(){var t=localStorage.getItem("uid")||0,e=Object(k["i"])(t);e.data&&(this.likeList=e.data)},cancleClickZan:function(t){var e=localStorage.getItem("uid"),i=Object(k["a"])(e,t);"成功"===i.msg&&(this.reqComment(),this.reqIsClickZan())}},computed:{isLogin:function(){return this.$store.state.isLoginSuc}},watch:{isLogin:function(){this.showUserName(),this.reqIsClickZan()}}},U=H,z=(i("4b8c"),Object(m["a"])(U,D,M,!1,null,"7099cb1e",null)),J=z.exports,X={name:"Post",props:["id"],components:{Nav:a["a"],PostMain:d,PostBanner:C,PostCenter:S,goTop:L["a"],recommend:O,Postbottom:B,Comment:J},data:function(){return{isShowRe:!1,banner:"",title:"",head_img:"",author:"",created_time:"",content:"",view:1,like_number:1,comment:0}},created:function(){this.reqArticleData(),localStorage.getItem("username")&&(this.$store.state.isLoginSuc=!0)},methods:{reqArticleData:function(){var t=this.$route.params.id,e=Object(k["d"])(t);e.id?(this.created_time=Object(F["a"])(e.created_time).toString().slice(0,10),this.banner=e.banner_img_src,this.title=e.title,this.head_img=e.headerImg,this.author=e.author,this.content=e.content,this.view=e.view,this.like_number=e.like_number):this.$router.push("/Page404")},colseComment:function(t){var e=t.target,i=["comment-input","comment-submit","file-btn","comment-textarea","iconfont icon-liuyan"],n=i.includes(e.className);if(!n){this.isShowRe=!1;var s=document.querySelectorAll(".texterea-container");s.forEach((function(t){t.style.display="none"}))}},showRe:function(t){this.isShowRe=t},reqNewData:function(){this.reqArticleData()},commentCount:function(t){this.comment=t}}},Y=X,G=Object(m["a"])(Y,n,s,!1,null,"22d62a8f",null);e["default"]=G.exports}}]);
//# sourceMappingURL=chunk-5180e828.633a1a3a.js.map