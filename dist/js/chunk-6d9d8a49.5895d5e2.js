(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d9d8a49"],{"01e2":function(t,e,n){},"059c":function(t,e,n){"use strict";var i=n("e5cf"),s=n.n(i);s.a},"0ff7":function(t,e,n){},2921:function(t,e,n){"use strict";var i=n("da60"),s=n.n(i);s.a},"495d":function(t,e,n){"use strict";var i=n("0ff7"),s=n.n(i);s.a},"4b8c":function(t,e,n){"use strict";var i=n("f3cf"),s=n.n(i);s.a},"7be7":function(t,e,n){"use strict";var i=n("01e2"),s=n.n(i);s.a},"8c1f":function(t,e,n){},d8eb:function(t,e,n){"use strict";var i=n("8c1f"),s=n.n(i);s.a},da60:function(t,e,n){},e5cf:function(t,e,n){},f3cf:function(t,e,n){},fb13:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.colseComment}},[n("PostMain",{scopedSlots:t._u([{key:"top",fn:function(){return[n("PostBanner",{attrs:{banner:t.banner,title:t.title,head_img:t.head_img,author:t.author,created_time:t.created_time}})]},proxy:!0},{key:"center",fn:function(){return[n("PostCenter",{attrs:{content:t.content,head_img:t.head_img,author:t.author,like_number:t.like_number,comment:t.comment},on:{userClickZan:t.reqNewData,chongdian:t.reqNewData}})]},proxy:!0}])}),n("Comment",{attrs:{isShowRe:t.isShowRe},on:{showRe:t.showRe,reqNewData:t.reqNewData,commentCount:t.commentCount}}),n("recommend"),n("Postbottom"),n("goTop",{staticClass:"go-top-component"}),n("Nav")],1)},s=[],a=(n("ac6a"),n("6762"),n("6b54"),n("8c47")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-main"},[n("div",{staticClass:"post-main-top"},[t._t("top")],2),n("div",{staticClass:"post-main-center"},[t._t("center")],2)])},c=[],r={name:"PostMain"},l=r,m=(n("059c"),n("2877")),u=Object(m["a"])(l,o,c,!1,null,"157e051e",null),d=u.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-column-center post-banner"},[n("div",{staticClass:"bgbox"}),n("div",{staticClass:"post-banner-content"},[n("img",{staticClass:"post-banner-img",attrs:{src:t.banner}}),n("h2",[t._v(t._s(t.title))]),n("div",{staticClass:"post-banner-info flex-between"},[n("div",{staticClass:"info-left"},[n("img",{attrs:{src:t.head_img}}),n("span",{staticClass:"author"},[t._v(t._s(t.author))])]),n("div",{staticClass:"info-right"},[t._v(t._s(t.created_time))])])])])},f=[],_={name:"PostBanner",props:{banner:{type:String,default:""},title:{type:String,default:""},head_img:{type:String,default:""},author:{type:String,default:""},created_time:{type:String,default:""}}},p=_,v=(n("7be7"),Object(m["a"])(p,h,f,!1,null,"0a30df38",null)),C=v.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-column-center post-center"},[n("div",{ref:"postcontent",staticClass:"post-article-content wangEditor-text",domProps:{innerHTML:t._s(t.content)}}),n("div",{ref:"postleft",staticClass:"post-center-left flex-column-center"},[n("i",{staticClass:"iconfont icon-chongdian center",class:{like_active:t.likeArt.includes(Number(t.article_id))},on:{click:t.likeArticle}}),n("span",[t._v(t._s(t.like_number))]),n("i",{staticClass:"iconfont icon-liuyan",on:{click:t.toComment}}),n("span",[t._v(t._s(t.comment))]),n("i",{staticClass:"iconfont icon-share"})]),n("div",{staticStyle:{width:"100%",height:"1px","background-color":"#eee","max-width":"750px"}}),n("div",{staticClass:"content-bottom"},[n("div",{staticClass:"info-left"},[n("img",{attrs:{src:t.head_img}}),n("span",{staticClass:"author"},[t._v(t._s(t.author))]),n("span",{staticClass:"attention-btn"},[t._v("关注")])])])])},b=[],k=(n("c5f6"),n("dc07")),w={name:"PostCenter",props:{content:{type:String,default:""},author:{type:String,default:""},view:{type:Number,default:0},comment:{type:Number,default:0},head_img:{type:String,default:""},like_number:{type:Number,default:0}},data:function(){return{likeArt:[],article_id:""}},created:function(){if(this.article_id=this.$route.params.id,this.isLogin){var t=localStorage.getItem("uid"),e=Object(k["j"])(Number(t));e&&(this.likeArt=e.data)}},mounted:function(){window.addEventListener("scroll",this.fixedLeft,!1)},updated:function(){var t=localStorage.getItem("uid");if(t){var e=Object(k["j"])(Number(t));e&&(this.likeArt=e.data)}},methods:{fixedLeft:function(){var t=document.documentElement.clientHeight/2,e=this.$refs.postcontent,n=this.$refs.postleft,i=e.getBoundingClientRect(),s=i.top,a=i.height,o=i.bottom,c=n.getBoundingClientRect().height;t>=s+c/2?(n.style.position="fixed",n.style.top=t-c/2+"px"):t<s+c/2&&(n.style.position="absolute",n.style.top="0px"),a>2*t&&o<=t+c/2&&(n.style.position="absolute",n.style.top=a-c+"px")},toComment:function(){var t=document.querySelector(".post-main").getBoundingClientRect().height,e=document.documentElement,n=document.body,i=setInterval((function(){var s=e.scrollTop||n.scrollTop,a=Math.floor((t-s)/8);e.scrollTop=n.scrollTop=s+a,0==a&&(e.scrollTop=n.scrollTop=t,clearInterval(i))}),5)},likeArticle:function(){if(this.isLogin){var t=localStorage.getItem("uid")||0,e=this.$route.params.id,n=Object(k["b"])(Number(t),Number(e));n&&this.$emit("chongdian")}else this.$store.state.isShowLogin=!0}},computed:{isLogin:function(){return this.$store.state.isLoginSuc}},watch:{isLogin:function(){var t=localStorage.getItem("uid")||0,e=Object(k["j"])(Number(t));e&&(this.likeArt=e.data)}},destroyed:function(){document.documentElement.scrollTop=0,window.removeEventListener("scroll",this.fixedLeft)}},x=w,y=(n("d8eb"),Object(m["a"])(x,g,b,!1,null,"6459c548",null)),S=y.exports,L=n("8bbb"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-column-center"},[n("div",{staticClass:"post-rec"},[n("h3",[t._v("推荐阅读")]),n("ul",{staticClass:"recommend-list"},t._l(t.recommentedList,(function(e,i){return n("li",{key:i,on:{click:function(n){return t.toX(e.id)}}},[n("div",{staticClass:"li-list-img"},[n("img",{attrs:{src:e.list_img_src}})]),n("h3",[t._v(t._s(e.title))]),n("div",{staticClass:"article-author-info"},[n("div",{staticClass:"left"},[n("img",{staticClass:"author-header-img",attrs:{src:e.headerImg}}),n("span",{staticClass:"author-username"},[t._v(t._s(e.author))])]),n("div",{staticClass:"right"},[n("span",{staticClass:"article-view"},[n("i",{staticClass:"iconfont icon-like"}),t._v("\n              "+t._s(e.view)+"\n            ")])])])])})),0)])])},$=[],I={name:"recommend",data:function(){return{recommentedList:[]}},created:function(){this.reqData()},methods:{reqData:function(){var t=Object(k["e"])("推荐");this.recommentedList=t.slice(3,9)},toX:function(t){var e=this.$router.resolve({path:"/articledetails/".concat(t)}),n=e.href;window.open(n,"_blank")}}},N=I,q=(n("495d"),Object(m["a"])(N,j,$,!1,null,"6098b46d",null)),O=q.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-bottom"},[n("div",{staticClass:"post-bottom-main flex-between"},[n("div",{staticClass:"left"},[t._m(0),n("Blogroll"),n("p",{staticClass:"copyright"},[t._v("© 2013-2019 少数派 | 粤ICP备09128966号-4 | CC BY-NC 4.0")])],1),t._m(1)])])},E=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left-logo"},[n("span",{staticClass:"logo-icon"}),n("span",{staticClass:"logo-title"},[t._v("少数派")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right"},[n("div",{staticClass:"link-box"},[n("a",{attrs:{href:"javascript:0"}},[t._v("关于我们")]),n("a",{attrs:{href:"javascript:0"}},[t._v("联系我们")])]),n("div",{staticClass:"link-box"},[n("a",{attrs:{href:"javascript:0"}},[t._v("成为作者")]),n("a",{attrs:{href:"javascript:0"}},[t._v("常见问题")])]),n("div",{staticClass:"link-box"},[n("a",{attrs:{href:"javascript:0"}},[t._v("用户协议")]),n("a",{attrs:{href:"javascript:0"}},[t._v("客户端")])])])}],T=n("f516"),A={name:"Postbottom",components:{Blogroll:T["a"]}},R=A,Z=(n("2921"),Object(m["a"])(R,P,E,!1,null,"562dadaa",null)),B=Z.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-column-center"},[n("div",{staticClass:"comment-comtainer"},[n("div",{staticClass:"comment-title"},[t._v("全部评论（"+t._s(t.commentCount)+"）")]),n("div",{staticClass:"comment-input"},[n("div",{staticClass:"left"},[n("img",{staticClass:"user-head-img",attrs:{src:t.headImg}})]),n("div",{staticClass:"right"},[t.isShowRe?t._e():n("input",{staticClass:"write-comment",attrs:{type:"text",placeholder:"写下你的评论"},on:{focus:t.writeComment}}),t.isShowRe?n("div",[n("p",{staticClass:"user-name"},[t._v(t._s(t.username))]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"comment-textarea",attrs:{autofocus:"true"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}}),n("div",{staticClass:"write-comment-bottom"},[n("span",{staticClass:"comment-submit",on:{click:function(e){return t.subComment()}}},[t._v("评论")])])]):t._e()])]),t.isNo?n("div",{staticClass:"no-comment"},[t._v("还没有评论哦~")]):t._e(),n("ul",{staticClass:"comment-ul"},t._l(t.commentList,(function(e,i){return n("div",{key:i,staticClass:"comment-item"},[n("li",{staticClass:"comment-li"},[n("div",{staticClass:"left"},[n("img",{staticClass:"user-head-img",attrs:{src:e.head_img}})]),n("div",{staticClass:"right"},[n("p",{staticClass:"user-name"},[t._v(t._s(e.username))]),n("p",{staticClass:"comment-created-time"},[t._v(t._s(e.created_time))]),n("p",{staticClass:"comment-content",domProps:{innerHTML:t._s(e.content)}}),n("div",{staticClass:"comment-icon"},[n("i",{staticClass:"iconfont icon-liuyan",on:{click:function(n){return t.showTexterea(e.created_time)}}}),n("span",{staticClass:"amount"},[t._v(t._s(e.reply_num))]),t.likeList.includes(e.id)?n("i",{staticClass:"iconfont icon-xin",on:{click:function(n){return t.cancleClickZan(e.id)}}}):n("i",{staticClass:"iconfont icon-like",on:{click:function(n){return t.clickZan(e.id)}}}),n("span",{staticClass:"amount"},[t._v(t._s(e.like_number))])]),n("div",{staticClass:"texterea-container",attrs:{"data-index":e.created_time}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"comment-textarea",attrs:{autofocus:"true"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}}),n("div",{staticClass:"write-comment-bottom"},[n("span",{staticClass:"comment-submit",on:{click:function(n){return t.subComment(e.id)}}},[t._v("评论")])])]),n("ul",{staticClass:"user-reply"},t._l(e.re_comment,(function(i,s){return n("li",{key:s,staticClass:"comment-li"},[n("div",{staticClass:"left"},[n("img",{staticClass:"user-head-img",attrs:{src:i.head_img}})]),n("div",{staticClass:"right"},[n("p",{staticClass:"user-name"},[t._v("\n                    "+t._s(i.username)+"\n                    "),i.re_username?n("span",{staticClass:"reply-username"},[t._v("回复 "+t._s(i.re_username))]):t._e()]),n("p",{staticClass:"comment-created-time"},[t._v(t._s(i.created_time))]),n("p",{staticClass:"comment-content",domProps:{innerHTML:t._s(i.content)}}),n("div",{staticClass:"comment-icon"},[n("i",{staticClass:"iconfont icon-liuyan",on:{click:function(e){return t.showTexterea(i.created_time)}}}),n("span",{staticClass:"amount"},[t._v(t._s(i.reply_num))]),t.likeList.includes(i.id)?n("i",{staticClass:"iconfont icon-xin",on:{click:function(e){return t.cancleClickZan(i.id)}}}):n("i",{staticClass:"iconfont icon-like",on:{click:function(e){return t.clickZan(i.id)}}}),n("span",{staticClass:"amount"},[t._v(t._s(i.like_number))])]),n("div",{staticClass:"texterea-container",attrs:{"data-index":i.created_time}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"comment-textarea",attrs:{autofocus:"true"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}}),n("div",{staticClass:"write-comment-bottom"},[n("span",{staticClass:"comment-submit",on:{click:function(n){return t.subComment(e.id,i.username,i.id)}}},[t._v("评论")])])])])])})),0)])])])})),0)])])},M=[],F=(n("a481"),n("ed08")),H={name:"comment",props:{isShowRe:{type:Boolean,default:!1}},data:function(){return{commentCount:0,headImg:"",username:"",commentList:[],isNo:!0,commentContent:"",likeList:[]}},created:function(){this.showUserName(),this.reqComment(),this.reqIsClickZan()},methods:{showUserName:function(){if(this.isLogin){var t=localStorage.getItem("headImg"),e=localStorage.getItem("username");t&&(this.headImg=t),e&&(this.username=e)}else this.headImg="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1571071012103&di=246bbc25cc64b3ae9e466baf1755e816&imgtype=0&src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F01460b57e4a6fa0000012e7ed75e83.png%401280w_1l_2o_100sh.png"},writeComment:function(){if(this.isLogin){this.$emit("showRe",!0);var t=document.querySelectorAll(".texterea-container");t.forEach((function(t){t.style.display="none"}))}else this.$store.state.isShowLogin=!0},reqComment:function(){var t=this,e=this.$route.params.id,n=Object(k["f"])(e),i=[];n.length&&n.forEach((function(t){if(0===t.re_comment_id){var e={};e.id=t.id,e.article_id=t.article_id,e.user_id=t.user_id,e.username=Object(k["h"])(t.user_id).username,e.head_img=Object(k["h"])(t.user_id).headerImg,e.content=t.comment_content,e.created_time=Object(F["a"])(t.created_time),e.like_number=t.like_number,e.reply_num=t.reply_num,e.re_comment=[],i.unshift(e)}else i.forEach((function(e){if(e.id===t.re_comment_id){var n={};n.id=t.id,n.article_id=t.article_id,n.user_id=t.user_id,n.head_img=Object(k["h"])(t.user_id).headerImg,n.username=Object(k["h"])(t.user_id).username,n.created_time=Object(F["a"])(t.created_time),n.content=t.comment_content,n.reply_num=t.reply_num,n.like_number=t.like_number,"0"==t.re_username?n.re_username="":n.re_username=t.re_username,e.re_comment.push(n)}}))})),this.commentList=i,this.commentCount=i.length,i.length>0&&i.forEach((function(e){t.commentCount=t.commentCount+e.re_comment.length})),this.$emit("commentCount",this.commentCount),n.length&&(this.isNo=!1)},subComment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.commentContent.trim()){var i=this.$route.params.id,s=t,a=localStorage.getItem("uid"),o=e,c=this.commentContent.replace(/\n|\r\n/g,"<br/>"),r=Object(k["k"])({article_id:i,user_id:a,re_comment_id:s,re_username:o,content:c,subCommentId:n});"成功"===r.msg&&(this.reqComment(),this.commentContent="",this.$emit("showRe",!1),this.hideTextereaAll())}else this.$store.state.toastMsg="不能提交空内容！",this.$store.state.isShowPopup=!0},showTexterea:function(t){if(this.isLogin){this.$emit("showRe",!1),this.hideTextereaAll();var e=document.querySelector(".texterea-container[data-index='".concat(t,"']"));e.style.display="block"}else this.$store.state.isShowLogin=!0},hideTextereaAll:function(){var t=document.querySelectorAll(".texterea-container");t.forEach((function(t){t.style.display="none"}))},clickZan:function(t){if(this.isLogin){var e=localStorage.getItem("uid"),n=Object(k["c"])(e,t);"成功"===n.msg&&(this.reqComment(),this.reqIsClickZan())}else this.$store.state.isShowLogin=!0},reqIsClickZan:function(){var t=localStorage.getItem("uid")||0,e=Object(k["i"])(t);e.data&&(this.likeList=e.data)},cancleClickZan:function(t){var e=localStorage.getItem("uid"),n=Object(k["a"])(e,t);"成功"===n.msg&&(this.reqComment(),this.reqIsClickZan())}},computed:{isLogin:function(){return this.$store.state.isLoginSuc}},watch:{isLogin:function(){this.showUserName(),this.reqIsClickZan()}}},U=H,z=(n("4b8c"),Object(m["a"])(U,D,M,!1,null,"7099cb1e",null)),J=z.exports,X={name:"Post",props:["id"],components:{Nav:a["a"],PostMain:d,PostBanner:C,PostCenter:S,goTop:L["a"],recommend:O,Postbottom:B,Comment:J},data:function(){return{isShowRe:!1,banner:"",title:"",head_img:"",author:"",created_time:"",content:"",view:1,like_number:1,comment:0}},created:function(){this.reqArticleData(),localStorage.getItem("username")&&(this.$store.state.isLoginSuc=!0)},methods:{reqArticleData:function(){var t=this.$route.params.id,e=Object(k["d"])(t);e.id?(this.created_time=Object(F["a"])(e.created_time).toString().slice(0,10),this.banner=e.banner_img_src,this.title=e.title,this.head_img=e.headerImg,this.author=e.author,this.content=e.content,this.view=e.view,this.like_number=e.like_number):this.$router.push("/Page404")},colseComment:function(t){var e=t.target,n=["comment-input","comment-submit","file-btn","comment-textarea","iconfont icon-liuyan"],i=n.includes(e.className);if(!i){this.isShowRe=!1;var s=document.querySelectorAll(".texterea-container");s.forEach((function(t){t.style.display="none"}))}},showRe:function(t){this.isShowRe=t},reqNewData:function(){this.reqArticleData()},commentCount:function(t){this.comment=t}}},Y=X,G=Object(m["a"])(Y,i,s,!1,null,"22d62a8f",null);e["default"]=G.exports}}]);
//# sourceMappingURL=chunk-6d9d8a49.5895d5e2.js.map